README.txt for AMAT Server: Automated Monitoring And Tunnels

This is a Pylons server that acts as the common endpoint for AMAT tunnels.

How this Pylons application was created
=======================================
$ sudo apt-get update
$ sudo apt-get install python-pylons python-sqlalchemy sysv-rc-conf rssh
$ sudo paster create -t pylons amat

Things to do before starting it up the first time
=================================================
# From the directory containing this README file...
$ sudo ln -s `pwd`/paster-control /etc/init.d/paster-control

# In the following command, turn on paster-control in runlevels 2-5
$ sudo sysv-rc-conf

# To do a complete setup of jail and app...
$ ./initial-setup.sh

# ...or, to just set up the app itself...
$ sudo paster setup-app development.ini

Running the server
==================
# Either...
$ sudo /etc/init.d/paster-control start

# ...or...
$ sudo paster serve --reload development.ini

# ...then watch the logfile at /var/log/paster.log
# ...and watch /var/log/auth.log

====================================
Notes about this Pylons application:
====================================

Controllers
===========
* reg     - handles machine registrations
* checkin - handles the frequent home phonings
* dump    - a debug tool (must be disabled in production version)

Database
========
* The database lives in amat.db
* Contains three tables:
** host    - relatively permanent data about a single host
** checkin - data about an individual checkin event
** tunnel  - data about an individual ssh tunnel
* The MAC address of the host (i.e. client) eth0 interface is primary key

=============================================================
This is the README generated by paster when it made this app:
=============================================================

Installation and Setup
======================

Install ``amat`` using easy_install::

    easy_install amat

Make a config file as follows::

    paster make-config amat config.ini

Tweak the config file as appropriate and then setup the application::

    paster setup-app config.ini

Then you are ready to go.

